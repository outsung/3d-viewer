(this["webpackJsonp3d-viewer"]=this["webpackJsonp3d-viewer"]||[]).push([[0],{57:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var r,c,o=n(5),i=n.n(o),a=n(44),l=n.n(a),s=(n(57),n(77)),u=n(13),d=n(12),j=n(15),b=n(16),f={mainColor:"#fd5c63",lightMainColor:"#FF9A9A",black:"#333",white:"#fff",storke:"#ddd",lightGray:"#f7f7f7",gray:"#9c9eb9"},x=b.a.div(r||(r=Object(j.a)(["\n  border: 1px solid ",";\n  border-radius: 5px;\n  padding: 5px;\n  width: ","px;\n  height: ","px;\n\n  & > div {\n    width: 100%;\n    height: 100%;\n    background-color: ",";\n  }\n"])),f.black,(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.check?f.mainColor:f.white})),O=n(8);function h(e){var t=e.check,n=e.size,r=e.onClick;return Object(O.jsx)(x,{size:n,check:t,onClick:r,children:Object(O.jsx)("div",{})})}var v=b.a.div(c||(c=Object(j.a)(['\n  display: flex;\n  align-items: "center";\n  justify-content: "center";\n\n  border: 0.5px solid ',";\n  border-radius: 4px;\n  padding: 8px 12px;\n\n  background-color: ",";\n\n  cursor: pointer;\n  & :hover {\n    ",";\n  }\n"])),f.gray,(function(e){return e.color}),(function(e){var t=e.hoverColor;return t?"background-color: ".concat(t):""})),p=n(26),g=n.n(p),m=n(34),y=n(10),k=n(0),C=n(17),R=n(76),w=i.a.forwardRef((function(e,t){var n=Object.assign({},e),r=Object(o.useState)(n.autoRotate),c=Object(d.a)(r,2),i=c[0],a=c[1],l=Object(C.c)().camera;return Object(o.useImperativeHandle)(t,(function(){return{setAutoRotate:a}}),[]),Object(O.jsx)(R.a,{autoRotate:i,camera:l})})),L=n(50),U=n(53),M=n(51),S=n(52);var z,F,P,A,I,D,B,E=i.a.forwardRef((function(e,t){return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(C.a,{children:[Object(O.jsx)(G,{ref:function(e){t&&"current"in t&&(t.current=t.current?Object(y.a)(Object(y.a)({},t.current),e):e)}}),Object(O.jsx)(w,{ref:function(e){t&&"current"in t&&(t.current=t.current?Object(y.a)(Object(y.a)({},t.current),e):e)},autoRotate:!1}),Object(O.jsx)("gridHelper",{})]})})})),G=Object(o.forwardRef)((function(e,t){var n=Object(o.useState)(null),r=Object(d.a)(n,2),c=r[0],i=r[1],a=Object(C.c)().camera,l=Object(o.useCallback)((function(e){console.log("setCamera : ",{camera:a,cameraInfo:e}),a.position.x=e.position[0],a.position.y=e.position[1],a.position.z=e.position[2],a.rotateX(e.rotate[0]),a.rotateY(e.rotate[1]),a.rotateZ(e.rotate[2])}),[a]),s=Object(o.useCallback)(function(){var e=Object(m.a)(g.a.mark((function e(t){var n,r,o,a,l,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fileURL,r=t.rootPath,o=t.file,a=t.type,l=k.LoaderUtils.extractUrlBase(n),e.prev=2,e.next=5,H({fileURL:n,rootPath:r,file:o,type:a,baseURL:l});case 5:s=e.sent,console.log(c,s),i(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0,"e");case 13:return e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),[c]);return Object(o.useImperativeHandle)(t,(function(){return{camera:a,setCamera:l,loadModel:s,model:c}}),[a,l,s,c]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("pointLight",{position:[3,3,3],intensity:1.5}),Object(O.jsx)("ambientLight",{intensity:1.5}),c?Object(O.jsx)("group",{ref:t,scale:.005,children:Object(O.jsx)("primitive",{object:c})}):Object(O.jsxs)("mesh",{onClick:function(){},children:[Object(O.jsx)("boxBufferGeometry",{}),Object(O.jsx)("meshStandardMaterial",{roughness:.6,color:f.mainColor})]})]})})),H=function(e){var t=e.fileURL,n=(e.rootPath,e.file),r=e.type;e.baseURL;return new Promise((function(e,c){var o=new k.LoadingManager;o.setURLModifier((function(e){var t=URL.createObjectURL(n);return a.push(t),e}));var i=function(e){var t=e.type,n=e.manager,r={gltf:0,fbx:1,obj:2}[t];return[new L.a(n).setCrossOrigin("anonymous").setDRACOLoader(new S.a(n).setDecoderPath("assets/wasm/")),new U.a(n).setCrossOrigin("anonymous"),new M.a(n).setCrossOrigin("anonymous")][r]}({type:r,manager:o}),a=[];i.load(t,(function(t){console.log({model:t});var n=(null===t||void 0===t?void 0:t.scenes)?t.scene||t.scenes[0]:t;if(n.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)})),!n)throw new Error("\ud30c\uc77c\uc5d0 Scene\uc774 \ud3ec\ud568 \ub418\uc5b4\uc788\uc9c0 \uc54a\uac70\ub098, 3d \ubaa8\ub378\uc774 \uc874\uc7ac \ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");a.forEach(URL.revokeObjectURL),e(n)}),void 0,c)}))},$=b.a.div(z||(z=Object(j.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex: 1;\n"]))),J=b.a.div(F||(F=Object(j.a)(["\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  z-index: 1;\n"]))),T=b.a.input(P||(P=Object(j.a)(["\n  display: none;\n"]))),X=b.a.div(A||(A=Object(j.a)(["\n  margin-bottom: 16px;\n  color: ",";\n"])),f.black),V=b.a.div(I||(I=Object(j.a)(["\n  border-radius: 4px;\n  padding: 8px;\n  background: rgba(0, 0, 0, 0.1);\n"]))),Y=b.a.div(D||(D=Object(j.a)([""]))),Z=b.a.div(B||(B=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  cursor: pointer;\n"])));function q(){var e=Object(o.useRef)(null),t=Object(o.useRef)(null),n=Object(o.useState)([]),r=Object(d.a)(n,2),c=r[0],i=r[1],a=Object(o.useRef)(0);return Object(O.jsxs)($,{children:[Object(O.jsxs)(J,{children:[Object(O.jsxs)(V,{style:{margin:"8px"},children:[Object(O.jsxs)(X,{children:[Object(O.jsx)("h3",{children:"Labels !"}),Object(O.jsx)("div",{children:"\ud2b9\uc815 \uce74\uba54\ub77c \uc704\uce58\ub97c \ub77c\ubca8\ub85c \uc800\uc7a5\ud558\uc138\uc694!"}),Object(O.jsx)("div",{children:"\ub77c\ubca8\uc744 \ud074\ub9ad\ud558\uba74 \ud574\ub2f9 \uc704\uce58\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4."})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)(v,{style:{marginBottom:c.length>0?"16px":"0px"},color:f.lightMainColor,onClick:function(){return function(){var e,n=null===(e=t.current)||void 0===e?void 0:e.camera;if(n){var r=n.rotation,c=n.position;a.current+=1;var o={name:"\uc0c8 \ub77c\ubca8 (".concat(a.current,")"),position:[c.x,c.y,c.z],rotate:[r.x,r.y,r.z],color:"#"+Math.round(16777215*Math.random()).toString(16)};i((function(e){return[].concat(Object(u.a)(e),[o])}))}}()},children:"\ucd94\uac00\ud558\uae30"}),Object(O.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:c.map((function(e,n){return Object(O.jsx)(K,{label:e,onClick:function(){return function(e){var n,r;(null===(n=t.current)||void 0===n?void 0:n.setCamera)&&(null===(r=t.current)||void 0===r||r.setCamera(e))}(e)},onDelete:function(){return e=n,void i((function(t){return t.filter((function(t,n){return n!==e}))}));var e}},n)}))})]})]}),Object(O.jsxs)(V,{style:{margin:"8px"},children:[Object(O.jsxs)(X,{children:[Object(O.jsx)("h3",{children:"Upload !"}),Object(O.jsx)("div",{children:"\uc5c5\ub85c\ub4dc \ubc84\ud2bc\uc744 \ub20c\ub7ec \uc6d0\ud558\uc2dc\ub294 3d \ubaa8\ub378 \ud30c\uc77c\uc744 \uc120\ud0dd\ud558\uc138\uc694!"}),Object(O.jsx)("div",{children:"\ud604\uc7ac obj, fbx, gltf, glb \ud30c\uc77c\uc744 \uc9c0\uc6d0 \ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4."})]}),Object(O.jsx)(T,{ref:e,onChange:function(n){var r=n.target.files?n.target.files[0]:void 0;if(r){var c,o,i,a=function(e){var t=[e.match(/\.(gltf|glb)$/),e.match(/\.obj$/),e.match(/\.fbx$/)].findIndex((function(e){return e}));return-1!==t?["gltf","obj","fbx"][t]:null}(r.name);if(console.log(a,r.name),!a)return alert("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud30c\uc77c \uc785\ub2c8\ub2e4.");var l=r,s=(null===(c=e.current)||void 0===c?void 0:c.value.replace(r.name,""))||"",u=URL.createObjectURL(l);console.log({rootFile:l,rootPath:s}),(null===(o=t.current)||void 0===o?void 0:o.loadModel)&&(null===(i=t.current)||void 0===i||i.loadModel({fileURL:u,rootPath:s,file:r,type:a})),URL.revokeObjectURL(u)}},type:"file",accept:".gltf, .glb, .obj, .fbx"}),Object(O.jsx)(v,{color:f.lightMainColor,onClick:function(){var t;null===(t=e.current)||void 0===t||t.click(),console.log("\uc5c5\ub85c\ub4dc or \ud30c\uc77c \uc120\ud0dd \ubc84\ud2bc click")},children:"\uc5c5\ub85c\ub4dc"})]}),Object(O.jsxs)(V,{style:{margin:"8px"},children:[Object(O.jsxs)(X,{children:[Object(O.jsx)("h3",{children:"Option !"}),Object(O.jsx)("div",{children:"\ub2e4\uc591\ud55c \uc635\uc158\uc744 \uc801\uc6a9\ud574\uc11c \ubaa8\ub378\uc744 \ubcf4\uc138\uc694!"})]}),Object(O.jsx)(Y,{children:Object(O.jsx)(N,{text:"\uc790\ub3d9 \ud68c\uc804",onClick:function(e){var n,r,c;console.log({modelViewerRef:null===(n=t.current)||void 0===n?void 0:n.setAutoRotate},{ischeck:e}),(null===(r=t.current)||void 0===r?void 0:r.setAutoRotate)&&(null===(c=t.current)||void 0===c||c.setAutoRotate(e))}})})]})]}),Object(O.jsx)(E,{ref:t})]})}function K(e){var t=e.label,n=e.onClick,r=e.onDelete;return Object(O.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(O.jsx)(v,{style:{flex:1,justifyContent:"space-between"},color:t.color,onClick:function(){return n()},children:Object(O.jsx)("div",{children:t.name})}),Object(O.jsx)("div",{onClick:function(){return r()},style:{padding:"0px 4px 0px 8px",color:"red",cursor:"pointer"},children:"X"})]})}function N(e){var t=e.text,n=e.onClick,r=e.initialState,c=void 0!==r&&r,i=Object(o.useState)(c),a=Object(d.a)(i,2),l=a[0],s=a[1],u=function(){n(!l),s(!l)};return Object(O.jsxs)(Z,{children:[Object(O.jsx)("div",{style:{flexGrow:1},color:f.mainColor,onClick:function(){return u()},children:t}),Object(O.jsx)(h,{size:15,onClick:function(){return u()},check:l})]})}var Q=n(19),W=Object(Q.a)({basename:"/3d-viewer"});function _(){return Object(O.jsx)(s.b,{history:W,children:Object(O.jsx)(s.c,{children:Object(O.jsx)(s.a,{exact:!0,path:"/upload",component:q})})})}var ee=function(){return Object(O.jsx)(_,{})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),o(e),i(e)}))};l.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(ee,{})}),document.getElementById("root")),te()}},[[72,1,2]]]);
//# sourceMappingURL=main.debccc0d.chunk.js.map